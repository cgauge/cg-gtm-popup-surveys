___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "CustomerGauge Pop-Up Survey",
  "categories": ["SURVEY"],
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,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1ShfyLmscN7irFbrrH1P/sJQQVvJcJ3WKBJYQhIpiJBRRwVVWIjSrpFiIk3ncQ//iONPkUsmVwWMHAuoQYXk+MH/4HdvzeLUpJsUigO9L7b9MQYEdoFWw7a/j227dQL4n4ErreOvNYG5T9IbHS1yBAxsAxfXHU3eAy53gOEnXTIkR/LTEopF4P2MvikPDN0CwTW3b+1znD4AWerV8g1wcAiMlyh73ePdfd19+7em3b8ftTFywVCSF1wAAA5VaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOmM3NzVlMmNjLTRiMTEtNDBkMi1iZWVjLWI1NmE3YjhiNDI5NCIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpkOTA3NGIwMi05MGFiLTRiM2UtOWE2ZS0zNTQ2ZjkwODNiYzUiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpiNzg3NmE2OC01MGYyLTRiODYtOWE1OS05ZjRjMWExNDM4ZDYiCiAgIEdJTVA6QVBJPSIyLjAiCiAgIEdJTVA6UGxhdGZvcm09IldpbmRvd3MiCiAgIEdJTVA6VGltZVN0YW1wPSIxNzA4MTAyNzA4MzQ3MDUwIgogICBHSU1QOlZlcnNpb249IjIuMTAuMzQiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICB0aWZmOk9yaWVudGF0aW9uPSIxIgogICB4bXA6Q3JlYXRvclRvb2w9IkdJTVAgMi4xMCIKICAgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyNDowMjoxNlQxNzo1ODoyNiswMTowMCIKICAgeG1wOk1vZGlmeURhdGU9IjIwMjQ6MDI6MTZUMTc6NTg6MjYrMDE6MDAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowYzAwYzZkNC0wMzkzLTQ0Y2UtYTRkOC0yNGI1NWNmYTI0NzYiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoV2luZG93cykiCiAgICAgIHN0RXZ0OndoZW49IjIwMjItMDQtMDVUMTM6MjE6MzMiLz4KICAgICA8cmRmOmxpCiAgICAgIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiCiAgICAgIHN0RXZ0OmNoYW5nZWQ9Ii8iCiAgICAgIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YzUzMTRmMzAtNDc2ZS00NDRjLWIzZjQtMzk0OWViODgxMzY2IgogICAgICBzdEV2dDpzb2Z0d2FyZUFnZW50PSJHaW1wIDIuMTAgKFdpbmRvd3MpIgogICAgICBzdEV2dDp3aGVuPSIyMDI0LTAyLTE2VDE3OjU4OjI4Ii8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PkqMe3cAAAAGYktHRAAAAAAAAPlDu38AAAAJcEhZcwAALiMAAC4jAXilP3YAAAAHdElNRQfoAhAQOhwxlBb2AAATrElEQVR42u2deVRUR77Hv7f3Zmsa2bppFESBZo1K0CBgBBU1ZtNM1BNjNDmjZsyZEBMn74+ZeTln3pkk8zK+iYkm6mTRFx2TSUSMoIlOkFWNLBoB2XcRutmkgd5u3/v+MPomShSqu7GN9T2H4x9y60fV/VTVr35V9bsMz/M8qO5bCWgTUACoKABUFAAqCgAVBYCKAkBFAaCiAFBRAKgoAFQUACoKABUFgIoCQEUBoKIAUFEAqCgAVBQAKgoAFQWAigJARQGgogBQUQCoKABUFAAqCgAVBYCKAkBFAaByeYnuhlGO4zA8PAyj0QiT0QizxQKLxQKWZXE9X4VIJIJYLIZMKoVMLoe7uzvc3d3BMIzLNibLshgZGYHJZILFbIaVZcGyLGw2G8DzEAiF1+olEkEilUIul8PNzQ0ikeiXDwDLstDpdLh8+TIuX76Mrq4udF7uRGfnZXS0d6Chru6WZ4KCNZgaFgaNJhgajQZBmiAEBwcjODgYPj4+LvHSDQYDrly5gq6uLnR3d0PX3Q19Tw/0Oh36+vrQ29ODgYGrsJjNUHgr4Ofvj0mTJsHfPwABAf7wDwiASqWCWq1GYGAg3N3dJ/TvZ5ydImZ4eBjV1dUoLytHfX0dampqUFNVTVzezIQEaKOjEBsTi8TZiQgKCoJQKJzwnt7S0oIL58+jpqYGzc3NqKqsgr67m6i8QLUK0TExmBoWhpiYGMyYMQOBgYEQCAT3JgA8z8NkMqG8rAzZ2UdQXV2FlqZmmIxG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\u003d"
  },
  "description": "Configure your Pop-Up Survey without writing any code.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "SELECT",
    "name": "region",
    "displayName": "CG Hosting Region",
    "macrosInSelect": false,
    "selectItems": [
      {
        "value": "eu",
        "displayValue": "Europe"
      },
      {
        "value": "us",
        "displayValue": "America"
      },
      {
        "value": "au",
        "displayValue": "Asia/Pacific"
      }
    ],
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "surveyId",
    "displayName": "Survey ID",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      },
      {
        "type": "STRING_LENGTH",
        "args": [
          36,
          36
        ],
        "errorMessage": "The Survey ID must be 36 characters long."
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "locale",
    "displayName": "Locale",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "defaultValue": "en_GB"
  },
  {
    "type": "SIMPLE_TABLE",
    "name": "params",
    "displayName": "Parameters",
    "simpleTableColumns": [
      {
        "defaultValue": "",
        "displayName": "Parameter Name",
        "name": "paramName",
        "type": "TEXT"
      },
      {
        "defaultValue": "",
        "displayName": "Parameter Value",
        "name": "paramValue",
        "type": "TEXT"
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// Declare GTM template APIs
const log = require('logToConsole');
const injectScript = require('injectScript');
const callInWindow = require('callInWindow');

// Get fields
const surveyId = data.surveyId;
const region = data.region ? data.region.trim().toLowerCase() : 'eu';
const locale = data.locale ? data.locale.trim() : 'en_GB';
let surveyParams = {};

// Creating Survey Params Object from params field
if (data.params && data.params.length) {
  data.params.forEach(param => {
    surveyParams[param.paramName] = param.paramValue;
  });
}

// Define Config object to initiate survey
const surveyConfig = {
    surveyId: surveyId,
    language: locale,
    params: surveyParams
};

// Compose Popup Survey Script URL
const popupUrl = 'https://survey.' + region + '.customergauge.com/pop-up/pop-up.iife.js';

// Callback to fire the survey
function fireSurvey() {
  callInWindow('CG.init', surveyConfig);
  data.gtmOnSuccess();
}

// Load the script and fire the survey
injectScript(popupUrl, fireSurvey, () => {
  log('Failed to load CustomerGauge survey library from ' + popupUrl);
  data.gtmOnFailure();
});


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "CG"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "CG.init"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "all"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://survey.dta.customergauge.com/pop-up/pop-up.iife.js"
              },
              {
                "type": 1,
                "string": "https://survey.eu.customergauge.com/pop-up/pop-up.iife.js"
              },
              {
                "type": 1,
                "string": "https://survey.us.customergauge.com/pop-up/pop-up.iife.js"
              },
              {
                "type": 1,
                "string": "https://survey.au.customergauge.com/pop-up/pop-up.iife.js"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: Happy path
  code: |-
    /**
     * Test 1 â€“ Happy path with all fields
     */
    mock('injectScript', function (url, successCB) {
      assertThat(url).isEqualTo(
        'https://survey.us.customergauge.com/pop-up/pop-up.iife.js'
      );
      successCB();
    });

    mock('callInWindow', function (fn, obj) {
      assertThat(fn).isEqualTo('CG.init');
      assertThat(obj).isEqualTo({
        surveyId: 'abc123',
        language: 'fr_FR',
        params: { email: 'john@example.com' }
      });
    });

    runCode({
      surveyId: 'abc123',
      region: 'us',
      locale: 'fr_FR',
      params: [{ paramName: "email", paramValue: 'john@example.com' }]
    });

    assertApi('injectScript').wasCalled();
    assertApi('callInWindow').wasCalled();
    assertApi('gtmOnSuccess').wasCalled();
    assertApi('gtmOnFailure').wasNotCalled();
- name: Defaults path
  code: |-
    mock('injectScript', function (url, successCB) {
      assertThat(url).isEqualTo(
        'https://survey.eu.customergauge.com/pop-up/pop-up.iife.js'
      );
      successCB();
    });

    mock('callInWindow', function (fn, obj) {
      assertThat(obj).isEqualTo({
        surveyId: 'def456',
        language: 'en_GB',
        params: {}
      });
    });

    runCode({ surveyId: 'def456' });

    assertApi('gtmOnSuccess').wasCalled();
- name: Script Load Failure
  code: |-
    mock('injectScript', function (url, successCB, failCB) {
      failCB();
    });

    runCode({
      surveyId: 'jkl012',
      params: '{}'
    });

    assertApi('gtmOnFailure').wasCalled();
    assertApi('callInWindow').wasNotCalled();


___NOTES___

Created on 08/07/2025, 14:50:57


